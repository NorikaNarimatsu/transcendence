services:
  backend_app:
    container_name: backend
    build:
      dockerfile: backend.Dockerfile
      context: backend/
    ports:
      - "8443:8443"
    networks:
      - transcendence_network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8443/health"]
      interval: 5s
      timeout: 2s
      retries: 5

  frontend_app:
    container_name: frontend
    build:
      dockerfile: frontend.Dockerfile
      context: frontend/
    ports:
      - "3000:3000"
    networks:
      - transcendence_network
    depends_on:
      backend_app:
        condition: service_healthy

networks:
  transcendence_network:
    name: transcendence_network
    driver: bridge